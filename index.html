<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Colorficial by kaanon</title>

    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/github-light.css">
    <link rel="stylesheet" href="css/demo.css">
    <meta name="viewport" content="width=device-width">
    <script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js'></script>
	<script src='js/color.js'></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <hr id='banner'/>
      <header>
        <img src='logo.png'>
        
        <h1>colorficial</h1>
        <p>Determine the name of a color easily.</p>

        <p class="view"><a href="https://github.com/kaanon/colorficial">View the Project on GitHub <small>kaanon/colorficial</small></a></p>


        <p class="view">
          <a href="documentation.html">Documentation
          <small>read the documentation</small>
          </a>
        </p>
      </header>
      <section>
		<fieldset>
			<h2>Enter a hex code</h2>
			<label>Code:  </label> <input type='string' placeholder='#FFFFFF' maxlength='7' name='hex' > <br/>
			<input type='submit' value='Add' class='newColorFromHex'>	
		</fieldset>
		<fieldset>
			<h2>Enter RGB Values</h2>
			<label>Red:   </label> <input type='number' min="0" max="255" name='red' > <br/>
			<label>Green: </label> <input type='number' min="0" max="255" name='green' > <br/> 
			<label>Blue:  </label> <input type='number' min="0" max="255" name='blue' > <br/>
			<input type='submit' value='Add' class='newColorFromRGB'>	
		</fieldset>

		<p class='hint'>
			<!-- Hint: reload the page to see different values <br/> -->
			<input type='submit' value='Random Colors' class='randomizeColors'>	
		</p>
		<br class='clear'/>
		<ul class='colors'></ul>
	</section>
	<footer>
        <p>This project is maintained by <a href="https://github.com/kaanon">kaanon</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>

<script>
colors = [];
$colors = $('ul.colors');
var x = new Color(0,0,0);
var named = _.keys(x.getColorMap());


function redraw(){
	$colors.html('');
	for(var i = 0, len = colors.length; i<len;i++){
		var c = colors[i];
		var css = {backgroundColor: c.css()};
		var $li = $('<li>');

		if(c.isDark()){
			css.color = 'white';
		}
		if(c.isNew){
			css['box-shadow'] = 'inset 0 10px 0px ' + c.css(0.5);
			// css['box-shadow'] = 'inset 0 2px 10px #F00';
    	}
		$li.css(css);
		var matchedColors = [];
		for(var j = 0, l2 = named.length; j<l2; j++){
			var colorName = named[j];
			// console.log('Comparing', c.toString(), ' to ', colorName);
			if(c.is(colorName)){
				matchedColors.push(colorName);
			}		
		}
		var $span = $('<span>').html(c.css());
		var $strong = $('<strong>').html(matchedColors.join(', ') + '<br/>');
		var hue = 'hue: ' + c.hue ;
		var sat = 'saturation: ' + c.saturation ;
		var lig = 'brightness: ' + c.brightness ;
		
		$div = $('<div>').html([hue,sat,lig].join('<br/>'));

		$li.append($strong);
		$li.append($span);
		$li.append($div);
		$colors.append($li);
	}
}

function randomColors(){
	var colorList = [];
	for(var k = 0; k<24; k++){
		var a = [_.random(0,255), _.random(0,255), _.random(0,255)];
		colorList.push(a);
	}
	var x = new Color(0,0,0);
	var named = _.keys(x.getColorMap());
	colorList = colorList.map(function(c){
		return new Color(c);
	});
	colorList = _(colorList).sortBy('hue');
	return colorList;
}


$('input[type=submit].newColorFromRGB').on('click', function(){
	var r = $('[name=red]').val(),
		g = $('[name=green]').val(),
		b = $('[name=blue]').val(),
		newColor = new Color(r,g,b);
  newColor.isNew = true;
	colors.unshift(newColor);
	redraw();
});
$('input[type=submit].newColorFromHex').on('click', function(){
	var hex = $('[name=hex]').val(),
		newColor = new Color(hex);
  newColor.isNew = true;
	colors.unshift(newColor);
	redraw();
});
$('input[type=submit].randomizeColors').on('click', function(){
	colors = randomColors();
	redraw();
});

colors = randomColors();
redraw();
</script>
</body>
</html>
